<!-- footer.html -->
<footer>
  <p style="text-align:center; font-size:14px; color:#777;">
    ğŸ’° ×™×•×ª×¨ ×× ×©××— ×œ×©××•×¢ ×× ×–×›×™×ª× ×‘×–×›×•×ª×™× ×• ğŸ’°
  </p>
  
  <!-- ×›×¤×ª×•×¨ ×”×ª×§× ×ª PWA -->
  <div style="text-align:center; margin-top:15px;">
    <button id="installBtn" style="display:none; background:linear-gradient(45deg, #4CAF50, #45a049); color:white; border:none; padding:10px 20px; border-radius:25px; cursor:pointer; font-size:14px; font-weight:bold; box-shadow:0 2px 8px rgba(0,0,0,0.2); transition:all 0.3s ease;">
      ğŸ“² ×”×ª×§×Ÿ ××ª ×”××¤×œ×™×§×¦×™×”
    </button>
  </div>
</footer>

<!-- Google Analytics / Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-analytics.js";

  // Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyDewHgup8jkCbRJOKfcE8qJn96lO5ZPo_I",
    authDomain: "loto-hot.firebaseapp.com",
    databaseURL: "https://loto-hot-default-rtdb.firebaseio.com",
    projectId: "loto-hot",
    storageBucket: "loto-hot.firebasestorage.app",
    messagingSenderId: "1078323335501",
    appId: "1:1078323335501:web:77f214ff257f14d17d2704",
    measurementId: "G-FR83RCV8Z8"
  };

  // Init Firebase + Analytics
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>

<script>
  // Service Worker Registration
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/service-worker.js")
      .then(() => console.log("Service Worker Registered"))
      .catch(err => console.error("Service Worker registration failed:", err));
  }
// PWA Install - ×’×¨×¡×” ×××•×œ×¦×ª ×©×¢×•×‘×“×ª ×ª××™×“
let deferredPrompt;
const installBtn = document.getElementById("installBtn");

if (installBtn) {
  // ×”×¦×’ ××ª ×”×›×¤×ª×•×¨ ×ª××™×“
  installBtn.style.display = "inline-block";
  
  // ×”××–×Ÿ ×œ-beforeinstallprompt
  window.addEventListener("beforeinstallprompt", (e) => {
    console.log("beforeinstallprompt event fired!");
    e.preventDefault();
    deferredPrompt = e;
    installBtn.style.background = "#4CAF50"; // ×™×¨×•×§ = ××•×›×Ÿ ×œ×”×ª×§× ×”
  });

  installBtn.addEventListener("click", async () => {
    if (deferredPrompt) {
      // ×™×© prompt - ×”×©×ª××© ×‘×•
      console.log("××ª×—×™×œ ×”×ª×§× ×” ×¨×’×™×œ×”...");
      deferredPrompt.prompt();
      const choiceResult = await deferredPrompt.userChoice;
      console.log("×ª×•×¦××”:", choiceResult.outcome);
      deferredPrompt = null;
    } else {
      // ××™×Ÿ prompt - ×”×¦×’ ×”×•×¨××•×ª ×™×“× ×™×•×ª
      console.log("××™×Ÿ beforeinstallprompt - ×”×¦×’ ×”×•×¨××•×ª");
      showManualInstallInstructions();
    }
  });

  // ×× ×”××¤×œ×™×§×¦×™×” ×”×•×ª×§× ×”
  window.addEventListener("appinstalled", () => {
    console.log("×”××¤×œ×™×§×¦×™×” ×”×•×ª×§× ×”!");
    installBtn.style.display = "none";
  });
}

function showManualInstallInstructions() {
  const userAgent = navigator.userAgent;
  let instructions = "";
  
  if (userAgent.includes("Chrome")) {
    instructions = `
×‘×›×“×™ ×œ×”×ª×§×™×Ÿ:
1. ×œ×—×¥ ×¢×œ â‹® (3 × ×§×•×“×•×ª) ×‘×¤×™× ×” ×”×™×× ×™×ª ×”×¢×œ×™×•× ×”
2. ×‘×—×¨ "×”×ª×§×Ÿ ×œ×•×˜×• AI..." ××• "Add to Home screen"
3. ×œ×—×¥ "×”×ª×§×Ÿ"
    `;
  } else if (userAgent.includes("Safari")) {
    instructions = `
×‘×›×“×™ ×œ×”×ª×§×™×Ÿ ×‘-Safari:
1. ×œ×—×¥ ×¢×œ ×›×¤×ª×•×¨ ×”×©×™×ª×•×£ â¬†ï¸
2. ×’×œ×•×œ ×œ××˜×” ×•×‘×—×¨ "Add to Home Screen"
3. ×œ×—×¥ "Add"
    `;
  } else if (userAgent.includes("Edge")) {
    instructions = `
×‘×›×“×™ ×œ×”×ª×§×™×Ÿ ×‘-Edge:
1. ×œ×—×¥ ×¢×œ â‹¯ (3 × ×§×•×“×•×ª) ×‘×¤×™× ×” ×”×™×× ×™×ª ×”×¢×œ×™×•× ×”  
2. ×‘×—×¨ "Apps" ×•××– "Install this site as an app"
3. ×œ×—×¥ "Install"
    `;
  } else {
    instructions = `
×‘×›×“×™ ×œ×”×ª×§×™×Ÿ:
- ×—×¤×© ××¤×©×¨×•×ª "Install" ××• "Add to Home Screen" ×‘×ª×¤×¨×™×˜ ×”×“×¤×“×¤×Ÿ
- ××• ×”×•×¡×£ ××ª ×”××ª×¨ ×œ×¡×™×× ×™×•×ª ×•×¤×ª×— ××©×
    `;
  }
  
  alert(instructions);
}
</script>
