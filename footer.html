<!-- footer.html -->
<footer>
  <p style="text-align:center; font-size:14px; color:#777;">
    ğŸ’° ×™×•×ª×¨ ×× ×©××— ×œ×©××•×¢ ×× ×–×›×™×ª× ×‘×–×›×•×ª×™× ×• ğŸ’°
  </p>
  
  <!-- ×›×¤×ª×•×¨ ×”×ª×§× ×” - ×ª××™×“ ×’×œ×•×™ -->
  <div style="text-align:center; margin-top:15px;">
    <button id="installBtn" style="display:none; background:linear-gradient(45deg, #4CAF50, #45a049); color:white; border:none; padding:10px 20px; border-radius:25px; cursor:pointer; font-size:14px; font-weight:bold; box-shadow:0 2px 8px rgba(0,0,0,0.2); transition:all 0.3s ease;">
      ğŸ“² ×”×ª×§×Ÿ ××ª ×”××¤×œ×™×§×¦×™×”
    </button>
  </div>
</footer>

<!-- Google Analytics / Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-analytics.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDewHgup8jkCbRJOKfcE8qJn96lO5ZPo_I",
    authDomain: "loto-hot.firebaseapp.com",
    databaseURL: "https://loto-hot-default-rtdb.firebaseio.com",
    projectId: "loto-hot",
    storageBucket: "loto-hot.firebasestorage.app",
    messagingSenderId: "1078323335501",
    appId: "1:1078323335501:web:77f214ff257f14d17d2704",
    measurementId: "G-FR83RCV8Z8"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>

<script>
  // Service Worker Registration
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/service-worker.js")
      .then(() => console.log("Service Worker Registered"))
      .catch(err => console.error("Service Worker registration failed:", err));
  }

  // PWA Install - ×ª××™×“ ×¤×¢×™×œ
  document.addEventListener("DOMContentLoaded", function() {
    let deferredPrompt;
    const installBtn = document.getElementById("installBtn");

    if (installBtn) {
      // ×›×¤×ª×•×¨ ×ª××™×“ ×’×œ×•×™
      console.log("×›×¤×ª×•×¨ ×”×ª×§× ×” × ×˜×¢×Ÿ");

      // × ×¡×” ×œ×ª×¤×•×¡ ××ª ×”-beforeinstallprompt
      window.addEventListener("beforeinstallprompt", (e) => {
        console.log("beforeinstallprompt ×–×•×”×”!");
        e.preventDefault();
        deferredPrompt = e;
        installBtn.style.background = "#4CAF50"; // ×™×¨×•×§ = ××•×›×Ÿ ×œ×”×ª×§× ×” ××œ××”
      });

      installBtn.addEventListener("click", async function(e) {
        e.preventDefault();
        
        if (deferredPrompt) {
          // ×™×© prompt ×¨×©××™
          console.log("××ª×—×™×œ ×”×ª×§× ×” ×¨×©××™×ª...");
          installBtn.style.display = "none";
          deferredPrompt.prompt();
          
          const choiceResult = await deferredPrompt.userChoice;
          if (choiceResult.outcome === "accepted") {
            console.log("×”×ª×§× ×” ××•×©×¨×”");
          } else {
            console.log("×”×ª×§× ×” × ×“×—×ª×”");
            installBtn.style.display = "block";
          }
          deferredPrompt = null;
          
        } else {
          // ××™×Ÿ prompt - ×”×¦×’ ×”×•×¨××•×ª ×™×“× ×™×•×ª
          console.log("××™×Ÿ beforeinstallprompt - ×”×•×¨××•×ª ×™×“× ×™×•×ª");
          showManualInstructions();
        }
      });

      // ×× ×”××¤×œ×™×§×¦×™×” ×”×•×ª×§× ×”
      window.addEventListener("appinstalled", () => {
        console.log("×”××¤×œ×™×§×¦×™×” ×”×•×ª×§× ×” ×‘×”×¦×œ×—×”!");
        installBtn.style.display = "none";
      });
    }

    function showManualInstructions() {
      const userAgent = navigator.userAgent.toLowerCase();
      let message = "";
      
      if (userAgent.includes("chrome") || userAgent.includes("edge")) {
        message = `×œ×”×ª×§× ×ª ×”××¤×œ×™×§×¦×™×”:\n\n1. ×œ×—×¥ ×¢×œ â‹® (×ª×¤×¨×™×˜) ×‘×¤×™× ×” ×”×™×× ×™×ª\n2. ×—×¤×© "×”×ª×§×Ÿ ××¤×œ×™×§×¦×™×”" ××• "Install App"\n3. ×œ×—×¥ "×”×ª×§×Ÿ"\n\n××•:\n- ×”×•×¡×£ ×œ×¡×™×× ×™×•×ª\n- ×¤×ª×— ××¡×™×× ×™×•×ª ×œ×’×™×©×” ××”×™×¨×”`;
      } else if (userAgent.includes("safari")) {
        message = `×œ×”×ª×§× ×” ×‘-Safari:\n\n1. ×œ×—×¥ ×¢×œ ×›×¤×ª×•×¨ ×”×©×™×ª×•×£ â¬†ï¸\n2. ×‘×—×¨ "Add to Home Screen"\n3. ×œ×—×¥ "Add"`;
      } else if (userAgent.includes("firefox")) {
        message = `×œ×”×ª×§× ×” ×‘-Firefox:\n\n1. ×œ×—×¥ ×¢×œ â˜° (×ª×¤×¨×™×˜)\n2. ×‘×—×¨ "Install"\n\n××• ×”×•×¡×£ ×œ×¡×™×× ×™×•×ª ×œ×’×™×©×” ××”×™×¨×”`;
      } else {
        message = `×œ×”×ª×§× ×ª ×”××¤×œ×™×§×¦×™×”:\n\n- ×—×¤×© ×‘×ª×¤×¨×™×˜ ×”×“×¤×“×¤×Ÿ ××¤×©×¨×•×ª "Install" ××• "Add to Home Screen"\n- ××• ×”×•×¡×£ ×œ×¡×™×× ×™×•×ª ×œ×’×™×©×” ××”×™×¨×”`;
      }
      
      alert(message);
    }
  });
</script>
