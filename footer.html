<!-- footer.html -->
<footer>
  <p style="text-align:center; font-size:14px; color:#777;">
    💰 יותר מנשמח לשמוע אם זכיתם בזכותינו 💰
  </p>
  

</footer>

<!-- Google Analytics / Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-analytics.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDewHgup8jkCbRJOKfcE8qJn96lO5ZPo_I",
    authDomain: "loto-hot.firebaseapp.com",
    databaseURL: "https://loto-hot-default-rtdb.firebaseio.com",
    projectId: "loto-hot",
    storageBucket: "loto-hot.firebasestorage.app",
    messagingSenderId: "1078323335501",
    appId: "1:1078323335501:web:77f214ff257f14d17d2704",
    measurementId: "G-FR83RCV8Z8"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>

<script>
  // Service Worker Registration
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/service-worker.js")
      .then(() => console.log("Service Worker Registered"))
      .catch(err => console.error("Service Worker registration failed:", err));
  }
<!-- כפתור התקנה -->
<div style="text-align:center; margin-top:15px;">
  <button id="installBtn" style="display:block; background:linear-gradient(45deg, #4CAF50, #45a049); color:white; border:none; padding:10px 20px; border-radius:25px; cursor:pointer; font-size:14px; font-weight:bold; box-shadow:0 2px 8px rgba(0,0,0,0.2); transition:all 0.3s ease;">
    📲 התקן את האפליקציה
  </button>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  let deferredPrompt;
  const installBtn = document.getElementById("installBtn");

  if (!installBtn) return;

  // תמיד גלוי
  installBtn.style.display = "block";

  // לוגים לבדיקה
  console.log("Footer JS נטען, כפתור מוכן");

  // תפיסת beforeinstallprompt אם קיים
  window.addEventListener("beforeinstallprompt", (e) => {
    console.log("beforeinstallprompt זוהה!");
    e.preventDefault();
    deferredPrompt = e;
    installBtn.style.background = "#4CAF50"; // ירוק = מוכן להתקנה רשמית
  });

  // לחיצה על הכפתור
  installBtn.addEventListener("click", async function() {
    // אם יש PWA אפשרית
    if (deferredPrompt) {
      console.log("מתחיל התקנה רשמית...");
      deferredPrompt.prompt();
      const choiceResult = await deferredPrompt.userChoice;
      if (choiceResult.outcome === "accepted") {
        console.log("התקנה אושרה");
        installBtn.style.display = "none";
      } else {
        console.log("התקנה נדחתה");
        installBtn.style.display = "block";
      }
      deferredPrompt = null;
    } else {
      // אם אין prompt – הוראות ידניות
      showManualInstructions();
    }
  });

  // אחרי התקנה
  window.addEventListener("appinstalled", () => {
    console.log("האפליקציה הותקנה בהצלחה!");
    installBtn.style.display = "none";
  });

  // פונקציה להוראות ידניות לפי דפדפן
  function showManualInstructions() {
    const ua = navigator.userAgent.toLowerCase();
    let message = "";

    if (ua.includes("chrome") || ua.includes("edge") || ua.includes("brave")) {
      message = `להתקנת האפליקציה:\n\n1. לחץ על ⋮ (תפריט) בפינה הימנית\n2. חפש "התקן אפליקציה" או "Install App"\n3. לחץ "התקן"\n\nאו:\n- הוסף לסימניות\n- פתח מסימניות לגישה מהירה`;
    } else if (ua.includes("safari") && !ua.includes("chrome")) {
      message = `להתקנה ב-Safari:\n\n1. לחץ על כפתור השיתוף ⬆️\n2. בחר "Add to Home Screen"\n3. לחץ "Add"`;
    } else if (ua.includes("firefox")) {
      message = `להתקנה ב-Firefox:\n\n1. לחץ על ☰ (תפריט)\n2. בחר "Install"\n\nאו הוסף לסימניות לגישה מהירה`;
    } else {
      message = `להתקנת האפליקציה:\n\n- חפש בתפריט הדפדפן אפשרות "Install" או "Add to Home Screen"\n- או הוסף לסימניות לגישה מהירה`;
    }

    alert(message);
  }
});
</script>
